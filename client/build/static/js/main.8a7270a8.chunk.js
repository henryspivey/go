(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,a){e.exports=a(342)},200:function(e,t,a){},201:function(e,t,a){},342:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(40),l=a.n(i),r=(a(200),a(201),a(202),a(353)),c=a(163),u=a(183),s=a(80),m=a(81),p=a(82),h=a(87),d=a(83),v=a(88),f=a(42),E=a.n(f),g=a(355),b=a(344),y=a(44),S=a(358),O=a(354),w=a(352),C=a(357),k="http://localhost:8080",j=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){a.setState(Object(s.a)({},e.target.name,e.target.value))},a.onSubmit=function(){var e=a.state,t=e.title,n=e.options,o=e.votes;n=n.map(function(e){return e.text}),o=Array.from({length:n.length},function(){return 0}),t&&E.a.post(k+"/api/survey",{title:t,options:n,votes:o},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){a.getTask(),a.setState({title:"",options:[]})})},a.getTask=function(e){var t=k+"/api/survey";E.a.get(t).then(function(e){e.data?a.setState({surveys:e.data.map(function(e){return o.a.createElement(g.a,{key:e._id,color:"purple",fluid:!0},o.a.createElement(g.a.Content,null,o.a.createElement(g.a.Header,{textAlign:"left"},o.a.createElement("div",{style:{wordWrap:"break-word"}},e.title)),o.a.createElement(g.a.Meta,null,"Survey ",e._id)),o.a.createElement(g.a.Content,{extra:!0},o.a.createElement(b.a,{animated:!0,basic:!0,href:"/api/survey/".concat(e._id)},o.a.createElement(b.a.Content,{visible:!0},"Take Survey"),o.a.createElement(b.a.Content,{hidden:!0},o.a.createElement(y.a,{name:"arrow right"})))))})}):a.setState({surveys:[]})})},a.addOption=function(e){a.setState({options:[].concat(Object(u.a)(a.state.options),[{text:""}])})},a.removeOption=function(e){return function(){a.setState({options:a.state.options.filter(function(t,a){return e!==a})})}},a.handleOptionChange=function(e){return function(t){console.log("hello");var n=a.state.options.map(function(a,n){return e!==n?a:Object(c.a)({},a,{text:t.target.value})});a.setState({options:n})}},a.state={title:"",surveys:[],question:"",options:[{text:""}],disabled:!1,votes:[]},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getTask()}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.options;return o.a.createElement("div",null,o.a.createElement("div",{className:"row"},o.a.createElement(S.a,{className:"header",as:"h2"},"Survey App")),o.a.createElement(g.a,{fluid:!0},o.a.createElement(g.a.Content,null,o.a.createElement(O.a,{onSubmit:this.onSubmit},o.a.createElement(w.a,{type:"text",name:"title",onChange:this.onChange,value:a,fluid:!0,placeholder:"Enter your question"}),n.map(function(t,a){return o.a.createElement(O.a.Field,{inline:!0,key:a,required:!0},o.a.createElement("label",null,"Option # ",a+1),o.a.createElement(w.a,{type:"text",placeholder:"Please enter an option",maxLength:"80",onChange:e.handleOptionChange(a)}))}),o.a.createElement(b.a,{fluid:!0,color:"teal",type:"submit"},"Submit"))),o.a.createElement(g.a.Content,{extra:!0},o.a.createElement(b.a,{icon:!0,labelPosition:"left",onClick:this.addOption},o.a.createElement(y.a,{name:"plus"}),"Add Option"))),o.a.createElement("div",{className:"row"},o.a.createElement(C.a,null,o.a.createElement(S.a,{className:"header",as:"h2"},"Surveys"),o.a.createElement(g.a.Group,null,this.state.surveys))))}}]),t}(n.Component),x=a(53),T=a(356),A=a(351),N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(){var e=a.props.match.params.id,t=a.state.value,n=Object(x.a)(a);E.a.put("/api/survey/".concat(e,"/vote/").concat(t)).then(function(e){console.log(e.data)}).then(function(){n.getSurveyResults(e)}).catch(function(e){console.log(e)})},a.handleChange=function(e,t){var n=t.value;return a.setState({value:n})},a.getSurvey=function(e){var t=Object(x.a)(a);E.a.get("/api/survey/".concat(e)).then(function(e){var a=e.data,n=a.title,o=a.options;t.setState({title:n,options:o,loading:!1})}).then(function(){t.getSurveyResults(e)}).catch(function(e){console.log(e)})},a.getSurveyResults=function(e){var t=Object(x.a)(a);E.a.get("/api/survey/".concat(e,"/results")).then(function(e){var a=e.data.votes;t.setState({statistics:a,loading:!1})}).catch(function(e){console.log(e)})},a.VoteStatistics=function(e,t){return o.a.createElement(T.a.Group,{widths:t.length},t.map(function(t,a){return o.a.createElement(T.a,{horizontal:!0,label:"Option ".concat(e[a]),value:t})}))},a.state={title:"",options:[],loading:!0,statistics:[]},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){console.log("mounted");var e=this.props.match.params.id;e&&this.getSurvey(e)}},{key:"render",value:function(){var e=this;if(this.state.loading)return o.a.createElement("p",null,"Loading ... ");var t=this.state,a=t.title,n=t.options,i=t.statistics;return o.a.createElement("div",null,o.a.createElement("h1",null,a),o.a.createElement(O.a,{onSubmit:this.onSubmit},o.a.createElement(O.a.Field,null,"Selected value: ",o.a.createElement("b",null,this.state.value)),o.a.createElement(O.a.Field,null,n.map(function(t,a){return o.a.createElement(A.a,{label:t,name:"radioGroup",value:a,checked:e.state.value===a,onChange:e.handleChange})})),o.a.createElement(b.a,{type:"submit"},"Submit")),i.length>0&&this.VoteStatistics(n,i))}}]),t}(n.Component),q=a(179),F=a(36);var G=function(){return o.a.createElement("div",null,o.a.createElement(r.a,null,o.a.createElement(q.a,null,o.a.createElement(F.c,null,o.a.createElement(F.a,{path:"/",exact:!0,component:j}),o.a.createElement(F.a,{path:"/api/survey/:id",exact:!0,component:N})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[195,1,2]]]);
//# sourceMappingURL=main.8a7270a8.chunk.js.map
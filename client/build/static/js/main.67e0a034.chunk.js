(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){e.exports=a(340)},198:function(e,t,a){},199:function(e,t,a){},340:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(41),l=a.n(o),i=(a(198),a(199),a(200),a(356)),u=a(59),s=a(182),c=a(80),d=a(81),m=a(89),p=a(82),v=a(90),h=a(52),f=a.n(h),E=a(354),g=a(352),y=a(349),b=a(348),q=a(341),S=a(353),C=a(88),x=a(351),w=function(e){var t=e.question;return r.a.createElement(x.a,null,r.a.createElement(x.a.Item,null,t.question))},k=function(e){var t=e._id,a=e.questions,n=e.index;return r.a.createElement(g.a,{color:"purple",fluid:!0},r.a.createElement(g.a.Content,null,r.a.createElement(g.a.Header,{textAlign:"left"},"Survey #".concat(n+1)),r.a.createElement(g.a.Meta,null,"Survey ",t),a&&a.map(function(e,t){return r.a.createElement(w,{key:t,question:e})})),r.a.createElement(g.a.Content,{extra:!0},r.a.createElement(C.b,{to:"/survey/".concat(t)},r.a.createElement("p",{className:"surveylink"},"Take Survey"))))},F=function(e){var t=e.visible;return r.a.createElement(S.a,{visible:t,error:!0,header:r.a.createElement(E.a,{as:"h3",textAlign:"left",content:"There was an error"}),content:"Please try again."})},O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).onQuestionChange=function(e){return function(t){var n=t.target.value,r=a.state.questions;r[e].question=n,a.setState({questions:r},function(){a.validateField("question",n)})}},a.validateField=function(e,t){var n=a.state.questionError,r=a.state.optionError;switch(e){case"question":n=t.length<1;break;case"option":r=t.length<1}a.setState({questionError:n,optionError:r},a.validateForm)},a.validateForm=function(){a.setState({disabled:!a.state.questionError&&!a.state.optionError})},a.onSubmit=function(){var e=a.state,t=e.questions,n=e.votes,r=e.generalError;f.a.post("/api/survey",{questions:t,votes:n},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){a.getSurveys()}).catch(function(e){a.setState({generalError:!r})}),a.setState({question:"",options:[{text:"",selected:!1}]})},a.getSurveys=function(){f.a.get("/api/survey").then(function(e){e.data?a.setState({surveys:e.data}):a.setState({surveys:[]})})},a.addQuestion=function(e){a.setState({questions:[].concat(Object(s.a)(a.state.questions),[{question:"",options:[{text:"",selected:!1}]}])})},a.addOption=function(e){var t=a.state.questions;t[e].options.push({text:"",selected:!1}),a.setState({questions:t})},a.handleOptionChange=function(e,t){return function(n){var r=a.state.questions,o=n.target.value;if(r.length>0){var l=r&&r[e].options.map(function(e,a){return a!==t?e:Object(u.a)({},e,{text:n.target.value})});r[e].options=l,a.setState({questions:r},function(){a.validateField("option",o)})}}},a.state={surveys:[],questions:[{question:"",options:[{text:"",selected:!1}]}],votes:[],disabled:!1,questionError:!1,optionError:!1,generalError:!1},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getSurveys()}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.questionError,o=t.optionError,l=t.generalError,u=t.surveys;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{as:"h2"},"Survey App"),r.a.createElement(g.a,{fluid:!0},r.a.createElement(g.a.Content,null,r.a.createElement(y.a,null,r.a.createElement(y.a.Field,null,a.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Input,{required:!0,type:"text",name:"title",onChange:e.onQuestionChange(a),value:t.question,fluid:!0,placeholder:"Enter your question",label:"Question: "}),t.options.map(function(t,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Field,{inline:!0,key:n,required:!0},r.a.createElement(b.a,{label:"Option # ".concat(n+1),required:!0,type:"text",placeholder:"Please enter an option",onChange:e.handleOptionChange(a,n)})))}),r.a.createElement(q.a,{icon:"plus",labelPosition:"left",onClick:function(){return e.addOption(a)},content:"Add Option"}))}),r.a.createElement(S.a,{visible:n||o,error:!0,header:r.a.createElement(E.a,{as:"h3",textAlign:"left",content:"Invalid Inputs"}),content:"Please check your inputs again. All fields are required."}),r.a.createElement(F,{visible:l})),r.a.createElement(q.a,{icon:"plus",labelPosition:"left",onClick:function(){return e.addQuestion()},content:"Add Question"}))),r.a.createElement(g.a.Content,{extra:!0},r.a.createElement(q.a,{color:"teal",type:"submit",onClick:this.onSubmit,content:"Submit"}))),r.a.createElement(i.a.Row,null,r.a.createElement(E.a,{as:"h2"},"Surveys"),r.a.createElement(g.a.Group,null,0===u.length?r.a.createElement(E.a,null,"No surveys yet"):u&&u.map(function(e,t){return r.a.createElement(k,Object.assign({key:e._id},e,{index:t}))}))))}}]),t}(n.Component),j=a(79),I=[{key:"be",flag:"be",text:"Belgium",value:"Belgium"},{key:"fr",flag:"fr",text:"France",value:"France"},{key:"it",flag:"it",text:"Italy",value:"Italy"},{key:"us",flag:"us",text:"United States",value:"United States"},{key:"nl",flag:"nl",text:"Netherlands",value:"Netherlands"}],A=a(60),V=a(350),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(){var e=a.props.match.params.id,t=a.state.age,n=a.state,r=n.country,o=n.email,l=n.questions,i=n.disabled,u=n.voted,s=n.generalError;t=parseInt(t);var c=l.map(function(e){if(!i)return{question:"".concat(e.question),response:e.options&&e.options.filter(function(e){return!0===e.selected})}});u||f.a.post("/api/survey/".concat(e,"/vote"),{email:o,country:r,age:t,responses:c},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){a.setState({voted:!u})}).catch(function(e){a.setState({generalError:!s})})},a.handleRadioChange=function(e){var t=e.target,n=a.state.questions.map(function(e,a){return e.question!==t.name?e:Object(u.a)({},e,{options:e.options.map(function(e){var a=e.text===t.value;return Object(u.a)({},e,{selected:a})})})});a.setState({questions:n})},a.handleInputChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(j.a)({},t,n),function(){a.validateField(t,n)})},a.validateField=function(e,t){var n=a.state.emailValid,r=a.state.ageValid,o=a.state.countryValid;switch(e){case"email":n=t.length>0&&t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)&&t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i).length>0;break;case"age":var l=parseInt(t);r=l>0&&!isNaN(l);break;case"country":o=t.length>0}a.setState({emailValid:n,ageValid:r,countryValid:o},function(){a.validateForm(n,r,o)})},a.validateForm=function(e,t,n){a.setState({disabled:e&&t&&n})},a.selectCountry=function(e,t){var n=t.value;a.setState({country:n},function(){return a.validateField("country",n)})},a.getSurvey=function(e){var t=a.state.generalError;f.a.get("/api/survey/".concat(e)).then(function(e){var t=e.data.questions;a.setState({questions:t,loading:!1})}).catch(function(e){a.setState({generalError:!t})})},a.state={loading:!0,statistics:[],country:"",age:0,email:"",questions:[],ageValid:!1,emailValid:!1,countryValid:!1,disabled:!0,voted:!1,generalError:!1},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getSurvey(e)}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("p",null,"Loading ... ");var t=this.state,a=t.questions,n=t.country,o=t.age,l=t.email,i=t.disabled,u=t.voted,s=t.generalError;return r.a.createElement("div",null,r.a.createElement(g.a,{fluid:!0},r.a.createElement(g.a.Content,null,r.a.createElement(y.a,{onSubmit:this.onSubmit},a.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{as:"h2",textAlign:"left",dividing:!0},t.question),t.options&&t.options.map(function(a,n){return r.a.createElement(y.a.Field,{key:n},r.a.createElement(E.a,{sub:!0,textAlign:"left"},a.text),r.a.createElement(b.a,{type:"radio",name:t.question,value:a.text,checked:a.selected,onChange:e.handleRadioChange}))}))}),r.a.createElement(y.a.Field,null,r.a.createElement(A.a,null,"Choose your country"),r.a.createElement(V.a,{placeholder:"Select Country",fluid:!0,selection:!0,options:I,onChange:this.selectCountry,value:n})),r.a.createElement(y.a.Group,{widths:"equal"},r.a.createElement(y.a.Field,null,r.a.createElement(y.a.Input,{type:"number",name:"age",onChange:this.handleInputChange,value:o,fluid:!0,label:"What is your age?",required:!0})),r.a.createElement(y.a.Field,null,r.a.createElement(y.a.Input,{type:"email",name:"email",onChange:this.handleInputChange,value:l,fluid:!0,label:"What is your email?",required:!0}))),r.a.createElement(S.a,{visible:!i,error:!0,header:r.a.createElement(E.a,{as:"h3",textAlign:"left",content:"Invalid Inputs"}),content:"Please check your inputs again. All fields are required."}),r.a.createElement(S.a,{visible:u,success:!0,header:r.a.createElement(E.a,{as:"h3",textAlign:"left",content:"Thanks for voting!"}),content:"You're all set."}),r.a.createElement(F,{visible:s}),r.a.createElement(q.a,{type:"submit",content:"Vote",disabled:!i&&!u})))))}}]),t}(n.Component),P=a(36);function Q(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Sorry, can\u2019t find that."))}var T=function(){return r.a.createElement(i.a,{padded:!0},r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(C.a,null,r.a.createElement(P.c,null,r.a.createElement(P.a,{exact:!0,path:"/",component:O}),r.a.createElement(P.a,{exact:!0,path:"/survey/:id",component:N}),r.a.createElement(P.a,{component:Q}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[193,1,2]]]);
//# sourceMappingURL=main.67e0a034.chunk.js.map